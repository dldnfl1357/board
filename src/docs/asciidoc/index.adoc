= Board API 문서
:doctype: book
:icons: font
:source-highlighter: highlightjs
:toc: left
:toclevels: 3
:sectlinks:
:operation-curl-request-title: Example request
:operation-http-response-title: Example response

[[overview]]
= 개요

이 문서는 Board 프로젝트의 REST API에 대한 상세 설명을 제공합니다.

[[overview-http-verbs]]
== HTTP 동사

본 REST API에서 사용하는 HTTP 동사(verbs)는 가능한 한 표준 HTTP와 REST 규약을 따릅니다.

|===
| 동사 | 용례

| `GET`
| 리소스를 가져올 때 사용

| `POST`
| 새 리소스를 만들 때 사용

| `PUT`
| 기존 리소스를 수정할 때 사용

| `PATCH`
| 기존 리소스의 일부를 수정할 때 사용

| `DELETE`
| 기존 리소스를 삭제할 때 사용
|===

[[overview-http-status-codes]]
== HTTP 상태 코드

본 REST API에서 사용하는 HTTP 상태 코드는 가능한 한 표준 HTTP와 REST 규약을 따릅니다.

|===
| 상태 코드 | 용례

| `200 OK`
| 요청을 성공적으로 처리함

| `201 Created`
| 새 리소스를 성공적으로 생성함

| `204 No Content`
| 기존 리소스를 성공적으로 삭제함

| `400 Bad Request`
| 잘못된 요청을 보낸 경우. 응답 본문에 오류에 대한 정보가 담겨있다.

| `401 Unauthorized`
| 인증되지 않은 요청

| `403 Forbidden`
| 권한이 없는 요청

| `404 Not Found`
| 요청한 리소스가 없음

| `409 Conflict`
| 리소스의 현재 상태와 충돌. 보통 중복된 데이터 존재
|===

[[overview-errors]]
== 오류

에러 응답이 발생했을 때 (상태 코드 >= 400), 본문에 해당 문제를 기술한 JSON 객체가 담겨있다.

=== 에러 응답 예시

[source,json]
----
{
  "code": "U001",
  "message": "User not found",
  "status": 404,
  "timestamp": "2024-01-01T10:00:00",
  "errors": []
}
----

=== 에러 응답 필드

|===
| Path | Type | Description

| `code`
| `String`
| 에러 코드

| `message`
| `String`
| 에러 메시지

| `status`
| `Number`
| HTTP 상태 코드

| `timestamp`
| `String`
| 에러 발생 시간

| `errors`
| `Array`
| 필드 에러 상세 정보 (Validation 오류 시)
|===

=== Validation 오류 응답 예시

[source,json]
----
{
  "code": "C002",
  "message": "Invalid input value",
  "status": 400,
  "timestamp": "2024-01-01T10:00:00",
  "errors": [
    {
      "field": "email",
      "value": "invalid-email",
      "reason": "올바른 이메일 형식이 아닙니다."
    }
  ]
}
----

[[overview-error-codes]]
== 에러 코드

=== 공통 에러

|===
| 코드 | 메시지 | HTTP Status | 설명

| `C001`
| Internal server error
| 500
| 서버 내부 오류

| `C002`
| Invalid input value
| 400
| 잘못된 입력 값

| `C003`
| Method not allowed
| 405
| 허용되지 않은 HTTP 메서드

| `C004`
| Entity not found
| 404
| 엔티티를 찾을 수 없음

| `C005`
| Invalid type value
| 400
| 잘못된 타입 값

| `C006`
| Access denied
| 403
| 접근 거부
|===

=== 사용자 에러

|===
| 코드 | 메시지 | HTTP Status | 설명

| `U001`
| User not found
| 404
| 사용자를 찾을 수 없음

| `U002`
| Email already exists
| 409
| 이미 존재하는 이메일

| `U003`
| Invalid password
| 400
| 잘못된 비밀번호

| `U004`
| Unauthorized
| 401
| 인증되지 않음
|===

[[authentication]]
= 인증 (Authentication)

인증 관련 API입니다.

[[auth-signup]]
== 회원가입

`POST` 요청을 사용하여 새로운 사용자를 등록합니다.

=== Request

include::{snippets}/auth/signup/http-request.adoc[]
include::{snippets}/auth/signup/request-fields.adoc[]

=== Response

include::{snippets}/auth/signup/http-response.adoc[]
include::{snippets}/auth/signup/response-fields.adoc[]

[[auth-login]]
== 로그인

`POST` 요청을 사용하여 로그인하고 JWT 토큰을 발급받습니다.

=== Request

include::{snippets}/auth/login/http-request.adoc[]
include::{snippets}/auth/login/request-fields.adoc[]

=== Response

include::{snippets}/auth/login/http-response.adoc[]
include::{snippets}/auth/login/response-fields.adoc[]

[[auth-refresh]]
== 토큰 재발급

`POST` 요청을 사용하여 Refresh Token으로 새로운 Access Token과 Refresh Token을 발급받습니다.

=== Request

include::{snippets}/auth/refresh/http-request.adoc[]
include::{snippets}/auth/refresh/request-headers.adoc[]

=== Response

include::{snippets}/auth/refresh/http-response.adoc[]
include::{snippets}/auth/refresh/response-fields.adoc[]

[[authentication-usage]]
== 인증된 요청 방법

로그인 후 발급받은 Access Token을 사용하여 인증이 필요한 API를 호출합니다.

=== Request Header

[source,http]
----
Authorization: Bearer {accessToken}
----

=== 토큰 유효 기간

- **Access Token**: 24시간
- **Refresh Token**: 7일

Access Token이 만료되면 Refresh Token을 사용하여 새로운 토큰을 발급받아야 합니다.

[[appendix]]
= 부록

[[appendix-validation]]
== Validation 규칙

=== 회원가입

==== 이메일
- 필수 입력
- 이메일 형식 검증
- 중복 검증

==== 비밀번호
- 필수 입력
- 8~20자
- 영문 대소문자 포함
- 숫자 포함
- 특수문자 포함 (@$!%*#?&)

==== 닉네임
- 필수 입력
- 2~20자
- 한글, 영문, 숫자, 언더스코어(_), 하이픈(-) 허용
- 중복 검증
